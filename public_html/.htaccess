<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    # 1. SECURITY: Block access to hidden files (.env, .git, etc.)
    RewriteRule ^\. - [F,L]

    # 2. SECURITY: Disable directory browsing
    Options -Indexes

    # 3. ASSETS: If the file actually exists (images, css, js), serve it directly
    RewriteCond %{REQUEST_FILENAME} -f
    RewriteCond %{REQUEST_FILENAME} -d
    RewriteRule ^ - [L]

    # 4. ROUTING: Route everything else to index.php
    # This includes /api/... endpoints AND React frontend routes (/admin, /about)
    RewriteRule ^ index.php [QSA,L]
</IfModule>

# SECURITY: Prevent Clickjacking
<IfModule mod_headers.c>
    Header always set X-Frame-Options "SAMEORIGIN"
    Header always set X-Content-Type-Options "nosniff"
    Header always set Referrer-Policy "strict-origin-when-cross-origin"
</IfModule>
